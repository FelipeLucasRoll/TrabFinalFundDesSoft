<?
##
## Envio de Emails pelo SMTP Autenticado usando PEAR
##
# Mais detalhes sobre o PEAR:
# http://pear.php.net/
#
# Mais detalhes sobre o PEAR Mail:
# http://pear.php.net/manual/en/package.mail.mail-mime.php
##

# Faz o include do PEAR Mail.
include (Mail.php);

# E-mail de destino. Caso seja mais de um destino, crie um array de e-mails.
# *OBRIGATRIO*
$recipients =  endereco@mail.com.br;

# Cabealho do e-mail.
$headers =
array (
From =>  endereco@mail.com.br, # O From  *OBRIGATRIO*.
To =>  DESTINATARIO@DominioDestinatario.com,
Subject => TITULO DO E-MAIL
);

# Utilize esta opo caso deseje definir o e-mail de resposta
# $headers['Reply-To'] =  EMailDeResposta@DominioDeResposta.com;

# Utilize esta opo caso deseje definir o e-mail de retorno em caso de erro de envio
# $headers['Errors-To'] =  endereco@mail.com.br;

# Utilize esta opo caso deseje definir a prioridade do e-mail
# $headers['X-Priority'] = 3&#8242;; # 1 UrgentMessage, 3 Normal

# Corpo da Mensagem
$body = Escreva aqui o texto do seu e-mail;

# Parmetros para o SMTP. *OBRIGATRIO*
$params =
array (
auth => true, # Define que o SMTP requer autenticao.
host => smtp.dominio.com.br, # Servidor SMTP
username => endereco@mail.com.br, # Usurio do SMTP
password => 12345&#8242; # Senha do seu MailBox. );

# Define o mtodo de envio! queremos smtp. *OBRIGATRIO*
$mail_object =& Mail::factory(smtp, $params);

# Envia o email. Se no ocorrer erro, retorna TRUE caso contrrio, retorna um # objeto PEAR_Error. Para ler a mensagem de erro, use o mtodo getMessage().
$result = $mail_object->send($recipients, $headers, $body);
if (PEAR::IsError($result)) {
echo ERRO ao tentar enviar o email. ( . $result->getMessage(). );
} else {
echo Email enviado com sucesso!;

} ?>